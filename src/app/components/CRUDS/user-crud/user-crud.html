<div class="container-fluid py-4">

  <!-- Header -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
        <div>
          <h1 class="display-6 fw-bold text-gradient mb-2">Gestión de Usuarios</h1>
          <p class="text-muted">Administra los usuarios y sus roles</p>
        </div>

        <button class="btn btn-success btn-modern" (click)="openNewUser()">
          <i class="bi bi-person-plus"></i> Nuevo Usuario
        </button>
      </div>
    </div>
  </div>

  <!-- Tabla -->
  <app-data-table
    [columns]="columns"
    [data]="users"
    [loading]="loading"
    [showSearch]="true"
    [showPagination]="true"
    [pageSize]="10"
    [emptyMessage]="'No hay usuarios registrados'"
    (viewClick)="onViewUser($event)"
    (editClick)="onEditUser($event)"
    (deleteClick)="onDeleteUser($event)">
  </app-data-table>

  <!-- Ver usuario -->
  @if (showViewModal && selectedUser) {
    <app-view-user-modal
      [user]="selectedUser"
      [isVisible]="showViewModal"
      (closeModal)="closeViewModal()">
    </app-view-user-modal>
  }

  <!-- Editar usuario -->
  @if (showEditModal && selectedUser) {
    <app-edit-user-modal
      [user]="selectedUser"
      [isVisible]="showEditModal"
      (saveUser)="onSaveUser($event)"
      (closeModal)="closeEditModal()">
    </app-edit-user-modal>
  }

  <!-- Confirmar eliminación lógica -->
  <app-confirm-modal
    [title]="'Desactivar Usuario'"
    [message]="'¿Estás seguro de que quieres desactivar al usuario ' + (userToDelete?.email || '') + '?'"
    [confirmText]="'Desactivar'"
    [cancelText]="'Cancelar'"
    [type]="'warning'"
    [visible]="showDeleteModal"
    (confirm)="confirmDelete()"
    (cancel)="cancelDeleteModal()">
  </app-confirm-modal>

</div>
